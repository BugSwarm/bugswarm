2022-06-21T16:17:38.9210839Z Requested labels: ubuntu-latest
2022-06-21T16:17:38.9210905Z Job defined at: motdotla/node-lambda/.github/workflows/workflow.yml@refs/heads/master
2022-06-21T16:17:38.9210930Z Waiting for a runner to pick up this job...
2022-06-21T16:17:40.0434586Z Job is waiting for a hosted runner to come online.
2022-06-21T16:17:43.2815137Z Job is about to start running on the hosted runner: GitHub Actions 4 (hosted)
2022-06-21T16:17:47.3685382Z Current runner version: '2.293.0'
2022-06-21T16:17:47.3714446Z ##[group]Operating System
2022-06-21T16:17:47.3715077Z Ubuntu
2022-06-21T16:17:47.3715368Z 20.04.4
2022-06-21T16:17:47.3715700Z LTS
2022-06-21T16:17:47.3716172Z ##[endgroup]
2022-06-21T16:17:47.3718012Z ##[group]Virtual Environment
2022-06-21T16:17:47.3718553Z Environment: ubuntu-20.04
2022-06-21T16:17:47.3718966Z Version: 20220614.0
2022-06-21T16:17:47.3719565Z Included Software: https://github.com/actions/virtual-environments/blob/ubuntu20/20220614.0/images/linux/Ubuntu2004-Readme.md
2022-06-21T16:17:47.3720463Z Image Release: https://github.com/actions/virtual-environments/releases/tag/ubuntu20%2F20220614.0
2022-06-21T16:17:47.3721029Z ##[endgroup]
2022-06-21T16:17:47.3721409Z ##[group]Virtual Environment Provisioner
2022-06-21T16:17:47.3721863Z 1.0.0.0-main-20220531-1
2022-06-21T16:17:47.3722260Z ##[endgroup]
2022-06-21T16:17:47.3723420Z ##[group]GITHUB_TOKEN Permissions
2022-06-21T16:17:47.3724224Z Actions: write
2022-06-21T16:17:47.3724829Z Checks: write
2022-06-21T16:17:47.3725302Z Contents: write
2022-06-21T16:17:47.3725640Z Deployments: write
2022-06-21T16:17:47.3726037Z Discussions: write
2022-06-21T16:17:47.3726434Z Issues: write
2022-06-21T16:17:47.3726755Z Metadata: read
2022-06-21T16:17:47.3727170Z Packages: write
2022-06-21T16:17:47.3727570Z Pages: write
2022-06-21T16:17:47.3727920Z PullRequests: write
2022-06-21T16:17:47.3728343Z RepositoryProjects: write
2022-06-21T16:17:47.3728807Z SecurityEvents: write
2022-06-21T16:17:47.3729157Z Statuses: write
2022-06-21T16:17:47.3729535Z ##[endgroup]
2022-06-21T16:17:47.3734728Z Secret source: Actions
2022-06-21T16:17:47.3735266Z Prepare workflow directory
2022-06-21T16:17:47.4774657Z Prepare all required actions
2022-06-21T16:17:47.4992525Z Getting action download info
2022-06-21T16:17:47.7446426Z Download action repository 'actions/checkout@v2' (SHA:7884fcad6b5d53d10323aee724dc68d8b9096a2e)
2022-06-21T16:17:48.4758824Z Download action repository 'actions/setup-node@v2' (SHA:1f8c6b94b26d0feae1e387ca63ccbdc44d27b561)
2022-06-21T16:17:49.3865194Z ##[group]Run actions/checkout@v2
2022-06-21T16:17:49.3865516Z with:
2022-06-21T16:17:49.3865792Z   repository: motdotla/node-lambda
2022-06-21T16:17:49.3866335Z   token: ***
2022-06-21T16:17:49.3866583Z   ssh-strict: true
2022-06-21T16:17:49.3866848Z   persist-credentials: true
2022-06-21T16:17:49.3867115Z   clean: true
2022-06-21T16:17:49.3867355Z   fetch-depth: 1
2022-06-21T16:17:49.3867575Z   lfs: false
2022-06-21T16:17:49.3867812Z   submodules: false
2022-06-21T16:17:49.3868083Z   set-safe-directory: true
2022-06-21T16:17:49.3868332Z ##[endgroup]
2022-06-21T16:17:49.7415421Z Syncing repository: motdotla/node-lambda
2022-06-21T16:17:49.7422590Z ##[group]Getting Git version info
2022-06-21T16:17:49.7423791Z Working directory is '/home/runner/work/node-lambda/node-lambda'
2022-06-21T16:17:49.7424934Z [command]/usr/bin/git version
2022-06-21T16:17:49.7569662Z git version 2.36.1
2022-06-21T16:17:49.7594085Z ##[endgroup]
2022-06-21T16:17:49.7619042Z Temporarily overriding HOME='/home/runner/work/_temp/bc836419-6cd6-4012-8914-4f8ff6915d9c' before making global git config changes
2022-06-21T16:17:49.7619614Z Adding repository directory to the temporary git global config as a safe directory
2022-06-21T16:17:49.7620288Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/node-lambda/node-lambda
2022-06-21T16:17:49.7663880Z Deleting the contents of '/home/runner/work/node-lambda/node-lambda'
2022-06-21T16:17:49.7668797Z ##[group]Initializing the repository
2022-06-21T16:17:49.7673044Z [command]/usr/bin/git init /home/runner/work/node-lambda/node-lambda
2022-06-21T16:17:49.7753580Z hint: Using 'master' as the name for the initial branch. This default branch name
2022-06-21T16:17:49.7754571Z hint: is subject to change. To configure the initial branch name to use in all
2022-06-21T16:17:49.7755085Z hint: of your new repositories, which will suppress this warning, call:
2022-06-21T16:17:49.7755417Z hint: 
2022-06-21T16:17:49.7755986Z hint: 	git config --global init.defaultBranch <name>
2022-06-21T16:17:49.7756610Z hint: 
2022-06-21T16:17:49.7757054Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2022-06-21T16:17:49.7757614Z hint: 'development'. The just-created branch can be renamed via this command:
2022-06-21T16:17:49.7757948Z hint: 
2022-06-21T16:17:49.7758234Z hint: 	git branch -m <name>
2022-06-21T16:17:49.7765561Z Initialized empty Git repository in /home/runner/work/node-lambda/node-lambda/.git/
2022-06-21T16:17:49.7820763Z [command]/usr/bin/git remote add origin https://github.com/motdotla/node-lambda
2022-06-21T16:17:49.7865727Z ##[endgroup]
2022-06-21T16:17:49.7866652Z ##[group]Disabling automatic garbage collection
2022-06-21T16:17:49.7870233Z [command]/usr/bin/git config --local gc.auto 0
2022-06-21T16:17:49.7905520Z ##[endgroup]
2022-06-21T16:17:49.7906380Z ##[group]Setting up auth
2022-06-21T16:17:49.7914035Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2022-06-21T16:17:49.7952089Z [command]/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :
2022-06-21T16:17:49.8430193Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2022-06-21T16:17:49.8466520Z [command]/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :
2022-06-21T16:17:49.8754057Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2022-06-21T16:17:49.8802903Z ##[endgroup]
2022-06-21T16:17:49.8803815Z ##[group]Fetching the repository
2022-06-21T16:17:49.8812972Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --progress --no-recurse-submodules --depth=1 origin +6901dcfd1e9b20ac1fdad7cd423fd9386de958a0:refs/remotes/origin/master
2022-06-21T16:17:50.2252711Z remote: Enumerating objects: 42, done.        
2022-06-21T16:17:50.2253504Z remote: Counting objects:   2% (1/42)        
2022-06-21T16:17:50.2253991Z remote: Counting objects:   4% (2/42)        
2022-06-21T16:17:50.2254887Z remote: Counting objects:   7% (3/42)        
2022-06-21T16:17:50.2255256Z remote: Counting objects:   9% (4/42)        
2022-06-21T16:17:50.2255583Z remote: Counting objects:  11% (5/42)        
2022-06-21T16:17:50.2255901Z remote: Counting objects:  14% (6/42)        
2022-06-21T16:17:50.2256203Z remote: Counting objects:  16% (7/42)        
2022-06-21T16:17:50.2256521Z remote: Counting objects:  19% (8/42)        
2022-06-21T16:17:50.2256836Z remote: Counting objects:  21% (9/42)        
2022-06-21T16:17:50.2257151Z remote: Counting objects:  23% (10/42)        
2022-06-21T16:17:50.2257453Z remote: Counting objects:  26% (11/42)        
2022-06-21T16:17:50.2257762Z remote: Counting objects:  28% (12/42)        
2022-06-21T16:17:50.2258076Z remote: Counting objects:  30% (13/42)        
2022-06-21T16:17:50.2258413Z remote: Counting objects:  33% (14/42)        
2022-06-21T16:17:50.2258723Z remote: Counting objects:  35% (15/42)        
2022-06-21T16:17:50.2259120Z remote: Counting objects:  38% (16/42)        
2022-06-21T16:17:50.2259422Z remote: Counting objects:  40% (17/42)        
2022-06-21T16:17:50.2260053Z remote: Counting objects:  42% (18/42)        
2022-06-21T16:17:50.2260363Z remote: Counting objects:  45% (19/42)        
2022-06-21T16:17:50.2260681Z remote: Counting objects:  47% (20/42)        
2022-06-21T16:17:50.2260976Z remote: Counting objects:  50% (21/42)        
2022-06-21T16:17:50.2262200Z remote: Counting objects:  52% (22/42)        
2022-06-21T16:17:50.2262540Z remote: Counting objects:  54% (23/42)        
2022-06-21T16:17:50.2262835Z remote: Counting objects:  57% (24/42)        
2022-06-21T16:17:50.2263138Z remote: Counting objects:  59% (25/42)        
2022-06-21T16:17:50.2263516Z remote: Counting objects:  61% (26/42)        
2022-06-21T16:17:50.2264101Z remote: Counting objects:  64% (27/42)        
2022-06-21T16:17:50.2264407Z remote: Counting objects:  66% (28/42)        
2022-06-21T16:17:50.2264714Z remote: Counting objects:  69% (29/42)        
2022-06-21T16:17:50.2265006Z remote: Counting objects:  71% (30/42)        
2022-06-21T16:17:50.2265315Z remote: Counting objects:  73% (31/42)        
2022-06-21T16:17:50.2265619Z remote: Counting objects:  76% (32/42)        
2022-06-21T16:17:50.2265928Z remote: Counting objects:  78% (33/42)        
2022-06-21T16:17:50.2266248Z remote: Counting objects:  80% (34/42)        
2022-06-21T16:17:50.2266549Z remote: Counting objects:  83% (35/42)        
2022-06-21T16:17:50.2266858Z remote: Counting objects:  85% (36/42)        
2022-06-21T16:17:50.2267151Z remote: Counting objects:  88% (37/42)        
2022-06-21T16:17:50.2267453Z remote: Counting objects:  90% (38/42)        
2022-06-21T16:17:50.2267753Z remote: Counting objects:  92% (39/42)        
2022-06-21T16:17:50.2268052Z remote: Counting objects:  95% (40/42)        
2022-06-21T16:17:50.2268349Z remote: Counting objects:  97% (41/42)        
2022-06-21T16:17:50.2268649Z remote: Counting objects: 100% (42/42)        
2022-06-21T16:17:50.2268970Z remote: Counting objects: 100% (42/42), done.        
2022-06-21T16:17:50.2269306Z remote: Compressing objects:   2% (1/34)        
2022-06-21T16:17:50.2269671Z remote: Compressing objects:   5% (2/34)        
2022-06-21T16:17:50.2270002Z remote: Compressing objects:   8% (3/34)        
2022-06-21T16:17:50.2270318Z remote: Compressing objects:  11% (4/34)        
2022-06-21T16:17:50.2270821Z remote: Compressing objects:  14% (5/34)        
2022-06-21T16:17:50.2271152Z remote: Compressing objects:  17% (6/34)        
2022-06-21T16:17:50.2271459Z remote: Compressing objects:  20% (7/34)        
2022-06-21T16:17:50.2271782Z remote: Compressing objects:  23% (8/34)        
2022-06-21T16:17:50.2273009Z remote: Compressing objects:  26% (9/34)        
2022-06-21T16:17:50.2273912Z remote: Compressing objects:  29% (10/34)        
2022-06-21T16:17:50.2274895Z remote: Compressing objects:  32% (11/34)        
2022-06-21T16:17:50.2275735Z remote: Compressing objects:  35% (12/34)        
2022-06-21T16:17:50.2277436Z remote: Compressing objects:  38% (13/34)        
2022-06-21T16:17:50.2283691Z remote: Compressing objects:  41% (14/34)        
2022-06-21T16:17:50.2284052Z remote: Compressing objects:  44% (15/34)        
2022-06-21T16:17:50.2284362Z remote: Compressing objects:  47% (16/34)        
2022-06-21T16:17:50.2284691Z remote: Compressing objects:  50% (17/34)        
2022-06-21T16:17:50.2308731Z remote: Compressing objects:  52% (18/34)        
2022-06-21T16:17:50.2414872Z remote: Compressing objects:  55% (19/34)        
2022-06-21T16:17:50.2419798Z remote: Compressing objects:  58% (20/34)        
2022-06-21T16:17:50.2421534Z remote: Compressing objects:  61% (21/34)        
2022-06-21T16:17:50.2422504Z remote: Compressing objects:  64% (22/34)        
2022-06-21T16:17:50.2423160Z remote: Compressing objects:  67% (23/34)        
2022-06-21T16:17:50.2423811Z remote: Compressing objects:  70% (24/34)        
2022-06-21T16:17:50.2424446Z remote: Compressing objects:  73% (25/34)        
2022-06-21T16:17:50.2425085Z remote: Compressing objects:  76% (26/34)        
2022-06-21T16:17:50.2425711Z remote: Compressing objects:  79% (27/34)        
2022-06-21T16:17:50.2426344Z remote: Compressing objects:  82% (28/34)        
2022-06-21T16:17:50.2426941Z remote: Compressing objects:  85% (29/34)        
2022-06-21T16:17:50.2427566Z remote: Compressing objects:  88% (30/34)        
2022-06-21T16:17:50.2428187Z remote: Compressing objects:  91% (31/34)        
2022-06-21T16:17:50.2428806Z remote: Compressing objects:  94% (32/34)        
2022-06-21T16:17:50.2429410Z remote: Compressing objects:  97% (33/34)        
2022-06-21T16:17:50.2430047Z remote: Compressing objects: 100% (34/34)        
2022-06-21T16:17:50.2430700Z remote: Compressing objects: 100% (34/34), done.        
2022-06-21T16:17:50.3616833Z remote: Total 42 (delta 1), reused 16 (delta 1), pack-reused 0        
2022-06-21T16:17:50.3729725Z From https://github.com/motdotla/node-lambda
2022-06-21T16:17:50.3730704Z  * [new ref]         6901dcfd1e9b20ac1fdad7cd423fd9386de958a0 -> origin/master
2022-06-21T16:17:50.3770789Z ##[endgroup]
2022-06-21T16:17:50.3771718Z ##[group]Determining the checkout info
2022-06-21T16:17:50.3773116Z ##[endgroup]
2022-06-21T16:17:50.3773846Z ##[group]Checking out the ref
2022-06-21T16:17:50.3778534Z [command]/usr/bin/git checkout --progress --force -B master refs/remotes/origin/master
2022-06-21T16:17:50.3906247Z Reset branch 'master'
2022-06-21T16:17:50.3911511Z branch 'master' set up to track 'origin/master'.
2022-06-21T16:17:50.3915641Z ##[endgroup]
2022-06-21T16:17:50.3970876Z [command]/usr/bin/git log -1 --format='%H'
2022-06-21T16:17:50.4010224Z '6901dcfd1e9b20ac1fdad7cd423fd9386de958a0'
2022-06-21T16:17:50.4397025Z ##[group]Run actions/setup-node@v2
2022-06-21T16:17:50.4397325Z with:
2022-06-21T16:17:50.4397548Z   node-version: 18.x
2022-06-21T16:17:50.4397802Z   cache: npm
2022-06-21T16:17:50.4398046Z   always-auth: false
2022-06-21T16:17:50.4398289Z   check-latest: false
2022-06-21T16:17:50.4398747Z   token: ***
2022-06-21T16:17:50.4398986Z ##[endgroup]
2022-06-21T16:17:50.6440809Z Attempting to download 18.x...
2022-06-21T16:17:51.2376593Z Acquiring 18.4.0 - x64 from https://github.com/actions/node-versions/releases/download/18.4.0-2509927094/node-18.4.0-linux-x64.tar.gz
2022-06-21T16:17:52.0163890Z Extracting ...
2022-06-21T16:17:52.0294540Z [command]/usr/bin/tar xz --strip 1 --warning=no-unknown-keyword -C /home/runner/work/_temp/8c12fd33-4afc-46f6-a5b3-2549e670686c -f /home/runner/work/_temp/151474ac-c7c3-401b-aeaf-5a084e3db6cf
2022-06-21T16:17:53.3730397Z Adding to the cache ...
2022-06-21T16:17:55.1477157Z Done
2022-06-21T16:17:55.1494713Z [command]/opt/hostedtoolcache/node/18.4.0/x64/bin/npm config get cache
2022-06-21T16:17:55.4951468Z /home/runner/.npm
2022-06-21T16:17:55.8371923Z 
2022-06-21T16:17:55.8383486Z npm cache is not found
2022-06-21T16:17:55.8558772Z ##[group]Run npm i -g npm
2022-06-21T16:17:55.8559120Z [36;1mnpm i -g npm[0m
2022-06-21T16:17:55.8625562Z shell: /usr/bin/bash -e {0}
2022-06-21T16:17:55.8625836Z ##[endgroup]
2022-06-21T16:17:58.4663102Z 
2022-06-21T16:17:58.4672092Z changed 17 packages, and audited 202 packages in 2s
2022-06-21T16:17:58.4672704Z 
2022-06-21T16:17:58.4673328Z 11 packages are looking for funding
2022-06-21T16:17:58.4673658Z   run `npm fund` for details
2022-06-21T16:17:58.4696783Z 
2022-06-21T16:17:58.4697224Z found 0 vulnerabilities
2022-06-21T16:17:58.4850513Z ##[group]Run node -v
2022-06-21T16:17:58.4850794Z [36;1mnode -v[0m
2022-06-21T16:17:58.4925580Z shell: /usr/bin/bash -e {0}
2022-06-21T16:17:58.4925857Z ##[endgroup]
2022-06-21T16:17:58.5071747Z v18.4.0
2022-06-21T16:17:58.5151893Z ##[group]Run npm -v
2022-06-21T16:17:58.5152164Z [36;1mnpm -v[0m
2022-06-21T16:17:58.5212528Z shell: /usr/bin/bash -e {0}
2022-06-21T16:17:58.5212806Z ##[endgroup]
2022-06-21T16:17:58.9291395Z 8.12.2
2022-06-21T16:17:58.9447209Z ##[group]Run npm ci
2022-06-21T16:17:58.9447568Z [36;1mnpm ci[0m
2022-06-21T16:17:58.9550328Z shell: /usr/bin/bash -e {0}
2022-06-21T16:17:58.9550731Z ##[endgroup]
2022-06-21T16:18:02.1863188Z npm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.
2022-06-21T16:18:02.4133060Z npm WARN deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.
2022-06-21T16:18:05.2526888Z 
2022-06-21T16:18:05.2527888Z added 401 packages, and audited 402 packages in 6s
2022-06-21T16:18:05.2529012Z 
2022-06-21T16:18:05.2529707Z 82 packages are looking for funding
2022-06-21T16:18:05.2530320Z   run `npm fund` for details
2022-06-21T16:18:05.2559815Z 
2022-06-21T16:18:05.2560310Z 2 moderate severity vulnerabilities
2022-06-21T16:18:05.2560704Z 
2022-06-21T16:18:05.2563528Z To address all issues (including breaking changes), run:
2022-06-21T16:18:05.2564676Z   npm audit fix --force
2022-06-21T16:18:05.2565039Z 
2022-06-21T16:18:05.2567465Z Run `npm audit` for details.
2022-06-21T16:18:05.2815756Z ##[group]Run npm test
2022-06-21T16:18:05.2816062Z [36;1mnpm test[0m
2022-06-21T16:18:05.2877548Z shell: /usr/bin/bash -e {0}
2022-06-21T16:18:05.2877859Z ##[endgroup]
2022-06-21T16:18:05.6500834Z 
2022-06-21T16:18:05.6501891Z > node-lambda@1.0.0 test
2022-06-21T16:18:05.6502633Z > npm run lint && npm run unit
2022-06-21T16:18:05.6595525Z 
2022-06-21T16:18:06.0099502Z 
2022-06-21T16:18:06.0101033Z > node-lambda@1.0.0 lint
2022-06-21T16:18:06.0106908Z > standard && standard bin/node-lambda
2022-06-21T16:18:06.0107563Z 
2022-06-21T16:18:09.8691595Z 
2022-06-21T16:18:09.8693059Z > node-lambda@1.0.0 unit
2022-06-21T16:18:09.8693837Z > mocha
2022-06-21T16:18:09.8694457Z 
2022-06-21T16:18:10.6482983Z 
2022-06-21T16:18:10.6494242Z 
2022-06-21T16:18:10.6504211Z   lib/cloudwatch_logs
2022-06-21T16:18:10.6639263Z     _logGroupName
2022-06-21T16:18:10.6859725Z       âœ” correct value
2022-06-21T16:18:10.6860052Z     _createLogGroup
2022-06-21T16:18:10.6860366Z       âœ” using mock
2022-06-21T16:18:10.6862956Z     _putRetentionPolicy
2022-06-21T16:18:10.6863279Z       âœ” using mock
2022-06-21T16:18:10.6864238Z     setLogsRetentionPolicy
2022-06-21T16:18:10.6867486Z       âœ” using mock
2022-06-21T16:18:10.6867644Z 
2022-06-21T16:18:10.6867739Z   lib/main
2022-06-21T16:18:10.6870324Z     âœ” version should be set
2022-06-21T16:18:10.6870595Z     _codeDirectory
2022-06-21T16:18:10.6871018Z       âœ” Working directory in the /tmp directory
2022-06-21T16:18:10.6873534Z     _runHandler
2022-06-21T16:18:10.6873913Z       âœ” context methods is a function
2022-06-21T16:18:10.6876921Z     _isFunctionDoesNotExist
2022-06-21T16:18:10.6879503Z       âœ” === true
2022-06-21T16:18:10.6879790Z       âœ” === false
2022-06-21T16:18:10.6880007Z     _isUseS3
2022-06-21T16:18:10.6880276Z       âœ” === true
2022-06-21T16:18:10.6880555Z       âœ” === false
2022-06-21T16:18:10.6880789Z     _useECR
2022-06-21T16:18:10.6881061Z       âœ” === true
2022-06-21T16:18:10.6881337Z       âœ” === false
2022-06-21T16:18:10.6881550Z     _params
2022-06-21T16:18:10.6881985Z       âœ” appends environment to original functionName
2022-06-21T16:18:10.6882529Z       âœ” appends environment to original functionName (production)
2022-06-21T16:18:10.6885273Z       âœ” appends version to original functionName
2022-06-21T16:18:10.6886289Z       âœ” appends version to original functionName (value not allowed by AWS)
2022-06-21T16:18:10.6886829Z       âœ” appends VpcConfig to params when vpc params set
2022-06-21T16:18:10.6887355Z       âœ” does not append VpcConfig when params are not set
2022-06-21T16:18:10.6891558Z       âœ” appends KMSKeyArn to params when KMS params set
2022-06-21T16:18:10.6892062Z       âœ” does not append KMSKeyArn when params are not set
2022-06-21T16:18:10.6892588Z       âœ” appends DeadLetterConfig to params when DLQ params set
2022-06-21T16:18:10.6893134Z       âœ” does not append DeadLetterConfig when params are not set
2022-06-21T16:18:10.6894741Z       âœ” appends TracingConfig to params when params set
2022-06-21T16:18:10.6895293Z       âœ” does not append TracingConfig when params are not set
2022-06-21T16:18:10.6896201Z       âœ” appends Layers to params when params set
2022-06-21T16:18:10.6896678Z       âœ” does not append Layers when params are not set
2022-06-21T16:18:10.6896978Z       S3 deploy
2022-06-21T16:18:10.6897332Z         âœ” Do not use S3 deploy
2022-06-21T16:18:10.6900431Z         âœ” Use S3 deploy
2022-06-21T16:18:10.6900693Z       PackageType: Zip|Image
2022-06-21T16:18:10.6904228Z         âœ” PackageType: Zip
2022-06-21T16:18:10.6909888Z         âœ” PackageType: Image
2022-06-21T16:18:10.6912937Z       params.Publish
2022-06-21T16:18:10.6913192Z         boolean
2022-06-21T16:18:10.6916737Z           âœ” If true, it is set to true
2022-06-21T16:18:10.6920422Z           âœ” If false, it is set to false
2022-06-21T16:18:10.6920701Z         string
2022-06-21T16:18:10.6923546Z           âœ” If "true", it is set to true
2022-06-21T16:18:10.6928278Z           âœ” If not "true", it is set to false
2022-06-21T16:18:10.6928547Z       configFile
2022-06-21T16:18:10.6943944Z         âœ” adds variables when configFile param is set
2022-06-21T16:18:10.6951805Z         âœ” when configFile param is set but it is an empty file
2022-06-21T16:18:10.6957143Z         âœ” does not add when configFile param is not set
2022-06-21T16:18:10.6958871Z     _cleanDirectory
2022-06-21T16:18:10.6984759Z       âœ” `codeDirectory` is empty
2022-06-21T16:18:10.7421511Z       âœ” `codeDirectory` is empty. (For `codeDirectory` where the file was present) (43ms)
2022-06-21T16:18:10.7422548Z     _fileCopy
2022-06-21T16:18:10.7762112Z       âœ” _fileCopy an index.js as well as other files
2022-06-21T16:18:10.7762950Z       when there are excluded files
2022-06-21T16:18:10.7988857Z         âœ” _fileCopy an index.js as well as other files
2022-06-21T16:18:10.8283603Z         âœ” _fileCopy excludes files matching excludeGlobs
2022-06-21T16:18:10.8637526Z         âœ” _fileCopy should not exclude package.json, even when excluded by excludeGlobs
2022-06-21T16:18:10.8970393Z         âœ” _fileCopy should not exclude package-lock.json, even when excluded by excludeGlobs
2022-06-21T16:18:10.9019558Z         âœ” _fileCopy should not include package.json when --prebuiltDirectory is set
2022-06-21T16:18:10.9032016Z     _shouldUseNpmCi
2022-06-21T16:18:10.9034496Z       when package-lock.json exists
2022-06-21T16:18:10.9044916Z         âœ” returns true
2022-06-21T16:18:10.9046983Z       when package-lock.json does not exist
2022-06-21T16:18:10.9055103Z         âœ” returns false
2022-06-21T16:18:10.9057302Z     _getNpmInstallCommand
2022-06-21T16:18:10.9058987Z       when package-lock.json exists
2022-06-21T16:18:10.9063461Z         âœ” npm ci
2022-06-21T16:18:10.9068335Z         âœ” npm ci with "--no-optional"
2022-06-21T16:18:10.9072769Z         âœ” npm ci on docker
2022-06-21T16:18:10.9110560Z       when package-lock.json does not exist
2022-06-21T16:18:10.9111249Z         âœ” npm install
2022-06-21T16:18:10.9115701Z         âœ” npm install with "--no-optional"
2022-06-21T16:18:10.9121435Z         âœ” npm install on docker
2022-06-21T16:18:10.9124198Z     _getYarnInstallCommand
2022-06-21T16:18:10.9127715Z       âœ” yarn install
2022-06-21T16:18:10.9131780Z       âœ” yarn install with "--no-optional"
2022-06-21T16:18:10.9135878Z       âœ” yarn install on docker
2022-06-21T16:18:10.9137990Z     _packageInstall
2022-06-21T16:18:10.9139469Z       Use npm
2022-06-21T16:18:10.9141070Z         when package-lock.json does exist
2022-06-21T16:18:17.4823044Z           âœ” should use "npm ci" (2619ms)
2022-06-21T16:18:17.4827510Z         when package-lock.json does not exist
2022-06-21T16:18:22.9242076Z           âœ” should use "npm install" (1571ms)
2022-06-21T16:18:22.9242568Z         optionalDependencies
2022-06-21T16:18:22.9244340Z           No `--no-optionalDependencies`
2022-06-21T16:18:30.4860130Z             âœ” optionalDependencies is installed (2967ms)
2022-06-21T16:18:30.4861245Z           With `--no-optionalDependencies`
2022-06-21T16:18:36.2132128Z             âœ” optionalDependency is NOT installed (1744ms)
2022-06-21T16:18:36.2132596Z       Use yarn
2022-06-21T16:18:48.2445863Z         âœ” should use "yarn install" (7958ms)
2022-06-21T16:18:48.2446458Z         optionalDependencies
2022-06-21T16:18:48.2446932Z           No `--ignore-optionalDependencies`
2022-06-21T16:18:59.4532813Z             âœ” optionalDependencies is installed (7187ms)
2022-06-21T16:18:59.4549362Z           With `--ignore-optionalDependencies`
2022-06-21T16:19:06.9174365Z             âœ” optionalDependency is NOT installed (3477ms)
2022-06-21T16:19:06.9177290Z     _packageInstall (When codeDirectory contains characters to be escaped)
2022-06-21T16:19:09.1490390Z       âœ” npm adds node_modules (2210ms)
2022-06-21T16:19:11.1055404Z       âœ” yarn adds node_modules (1807ms)
2022-06-21T16:19:11.2616785Z     _postInstallScript
2022-06-21T16:19:11.2625589Z       âœ” should not throw any errors if no script
2022-06-21T16:19:11.2630398Z => Running post install script post_install.sh
2022-06-21T16:19:11.2704654Z       âœ” should throw any errors if script fails
2022-06-21T16:19:11.2711801Z => Running post install script post_install.sh
2022-06-21T16:19:11.2787054Z 		Your environment is development
2022-06-21T16:19:11.2788857Z       âœ” running script gives expected output
2022-06-21T16:19:11.2791472Z     _zip
2022-06-21T16:19:11.2791797Z       Use npm
2022-06-21T16:19:13.6442294Z => Zipping repo. This might take up to 30 seconds
2022-06-21T16:19:22.4548939Z         âœ” Compress the file. `index.js` and `bin/node-lambda` are included and the permission is also preserved. (11175ms)
2022-06-21T16:19:22.4550755Z       Use yarn
2022-06-21T16:19:24.3934793Z => Zipping repo. This might take up to 30 seconds
2022-06-21T16:19:31.9973576Z         âœ” Compress the file. `index.js` and `bin/node-lambda` are included and the permission is also preserved. (9542ms)
2022-06-21T16:19:32.0051045Z     _archive
2022-06-21T16:19:32.0080978Z [Warning] `.env` file does not exist.
2022-06-21T16:19:32.0081798Z Execute `node-lambda setup` as necessary and set it up.
2022-06-21T16:19:32.1131802Z => Moving files to temporary directory
2022-06-21T16:19:32.1285071Z => Running package install
2022-06-21T16:19:34.3685276Z (Package manager used was 'npm'.)
2022-06-21T16:19:34.3696623Z => Zipping deployment package
2022-06-21T16:19:34.3697230Z => Zipping repo. This might take up to 30 seconds
2022-06-21T16:19:41.9459193Z       âœ” installs and zips with an index.js file and node_modules/aws-sdk (It is also a test of `_buildAndArchive`) (9938ms)
2022-06-21T16:19:42.0413327Z => Zipping deployment package
2022-06-21T16:19:42.0413977Z => Zipping repo. This might take up to 30 seconds
2022-06-21T16:19:42.0491891Z       âœ” packages a prebuilt module without installing (It is also a test of `_archivePrebuilt`) (97ms)
2022-06-21T16:19:42.0533680Z => Zipping deployment package
2022-06-21T16:19:42.0534549Z => Zipping repo. This might take up to 30 seconds
2022-06-21T16:19:42.0551848Z       âœ” cleans the temporary directory before running `_archivePrebuilt`
2022-06-21T16:19:42.0552451Z     _readArchive
2022-06-21T16:19:42.0553839Z => Zipping repo. This might take up to 30 seconds
2022-06-21T16:19:42.0601319Z       âœ” _readArchive fails (undefined)
2022-06-21T16:19:42.0606672Z       âœ” _readArchive fails (does not exists file)
2022-06-21T16:19:42.0619695Z       âœ” _readArchive reads the contents of the zipfile
2022-06-21T16:19:42.0620413Z       If value is set in `deployZipfile`, _readArchive is executed in _archive
2022-06-21T16:19:42.0623188Z [Warning] `.env` file does not exist.
2022-06-21T16:19:42.0623727Z Execute `node-lambda setup` as necessary and set it up.
2022-06-21T16:19:42.0628408Z => Moving files to temporary directory
2022-06-21T16:19:42.0849417Z => Running package install
2022-06-21T16:19:44.3879687Z (Package manager used was 'npm'.)
2022-06-21T16:19:44.3880084Z => Zipping deployment package
2022-06-21T16:19:44.3880499Z => Zipping repo. This might take up to 30 seconds
2022-06-21T16:19:51.7022746Z         âœ” `deployZipfile` is a invalid value. Process from creation of zip file (9639ms)
2022-06-21T16:19:51.7040317Z         âœ” `deployZipfile` is a valid value._archive reads the contents of the zipfile
2022-06-21T16:19:51.7041701Z     environment variable injection at runtime
2022-06-21T16:19:51.7048365Z       âœ” should inject environment variables at runtime
2022-06-21T16:19:51.7050417Z     create sample files
2022-06-21T16:19:51.7052530Z Running setup.
2022-06-21T16:19:51.7055010Z /home/runner/work/node-lambda/node-lambda/.env file successfully created
2022-06-21T16:19:51.7056008Z /home/runner/work/node-lambda/node-lambda/event.json file successfully created
2022-06-21T16:19:51.7056992Z /home/runner/work/node-lambda/node-lambda/deploy.env file successfully created
2022-06-21T16:19:51.7057983Z /home/runner/work/node-lambda/node-lambda/context.json file successfully created
2022-06-21T16:19:51.7058996Z /home/runner/work/node-lambda/node-lambda/event_sources.json file successfully created
2022-06-21T16:19:51.7059841Z Setup done.
2022-06-21T16:19:51.7060574Z Edit the .env, deploy.env, context.json, event_sources.json and event.json files as needed.
2022-06-21T16:19:51.7061443Z       âœ” should create sample files
2022-06-21T16:19:51.7061939Z       _eventSourceList
2022-06-21T16:19:51.7065725Z         âœ” program.eventSourceFile is empty value
2022-06-21T16:19:51.7073795Z         âœ” program.eventSourceFile is invalid value
2022-06-21T16:19:51.7074368Z         program.eventSourceFile is valid value
2022-06-21T16:19:51.7080620Z           âœ” only EventSourceMappings
2022-06-21T16:19:51.7084473Z           âœ” only ScheduleEvents
2022-06-21T16:19:51.7087746Z           âœ” only S3Events
2022-06-21T16:19:51.7093659Z           âœ” EventSourceMappings & ScheduleEvents
2022-06-21T16:19:51.7095471Z         old style event_sources.json
2022-06-21T16:19:51.7100052Z           âœ” program.eventSourceFile is valid value
2022-06-21T16:19:51.7103712Z     _listEventSourceMappings
2022-06-21T16:19:51.7124326Z       âœ” simple test with mock
2022-06-21T16:19:51.7124652Z     _getStartingPosition
2022-06-21T16:19:51.7126209Z       âœ” null in SQS
2022-06-21T16:19:51.7128188Z       âœ” When there is no setting
2022-06-21T16:19:51.7130154Z       âœ” With StartingPosition
2022-06-21T16:19:51.7130778Z     _updateEventSources
2022-06-21T16:19:51.7135510Z       âœ” program.eventSourceFile is empty value
2022-06-21T16:19:51.7144050Z       âœ” simple test with mock (In case of new addition)
2022-06-21T16:19:51.7149953Z       âœ” simple test with mock (In case of deletion)
2022-06-21T16:19:51.7159289Z       âœ” simple test with mock (In case of update)
2022-06-21T16:19:51.7161238Z     _updateScheduleEvents
2022-06-21T16:19:51.7236096Z       âœ” program.eventSourceFile is empty value
2022-06-21T16:19:51.7253167Z       âœ” simple test with mock
2022-06-21T16:19:51.7264224Z     _updateS3Events
2022-06-21T16:19:51.7347178Z       âœ” program.eventSourceFile is empty value
2022-06-21T16:19:51.7365859Z       âœ” simple test with mock
2022-06-21T16:19:51.7366275Z     _uploadNew
2022-06-21T16:19:51.7387833Z       âœ” simple test with mock
2022-06-21T16:19:51.7388090Z     _uploadExisting
2022-06-21T16:19:51.7403787Z       âœ” simple test with mock
2022-06-21T16:19:51.7404074Z     _setLogsRetentionPolicy
2022-06-21T16:19:51.7442491Z       âœ” simple test with mock
2022-06-21T16:19:51.7442789Z     check env vars before create sample files
2022-06-21T16:19:51.7445762Z Running setup.
2022-06-21T16:19:51.7447063Z /home/runner/work/node-lambda/node-lambda/.env file successfully created
2022-06-21T16:19:51.7448294Z /home/runner/work/node-lambda/node-lambda/deploy.env file successfully created
2022-06-21T16:19:51.7449223Z /home/runner/work/node-lambda/node-lambda/event_sources.json file successfully created
2022-06-21T16:19:51.7449473Z Setup done.
2022-06-21T16:19:51.7449846Z Edit the .env, deploy.env, newContext.json, event_sources.json and newEvent.json files as needed.
2022-06-21T16:19:51.7451059Z       âœ” should use existing sample files
2022-06-21T16:19:51.7453727Z     Lambda.prototype._deployToRegion()
2022-06-21T16:19:51.7458474Z => Reading event source file to memory
2022-06-21T16:19:51.7460940Z => Uploading zip file to AWS Lambda us-east-1 with parameters:
2022-06-21T16:19:51.7476858Z {
2022-06-21T16:19:51.7477284Z   FunctionName: '___node-lambda-development',
2022-06-21T16:19:51.7477523Z   Code: { ZipFile: null },
2022-06-21T16:19:51.7477754Z   Handler: 'index.handler',
2022-06-21T16:19:51.7478129Z   Role: 'some:arn:aws:iam::role',
2022-06-21T16:19:51.7478375Z   Runtime: 'nodejs16.x',
2022-06-21T16:19:51.7478588Z   Description: '',
2022-06-21T16:19:51.7478771Z   MemorySize: 128,
2022-06-21T16:19:51.7478949Z   Timeout: 3,
2022-06-21T16:19:51.7479183Z   Architectures: [ 'x86_64' ],
2022-06-21T16:19:51.7479382Z   Publish: false,
2022-06-21T16:19:51.7479636Z   VpcConfig: { SubnetIds: [], SecurityGroupIds: [] },
2022-06-21T16:19:51.7479883Z   Environment: { Variables: null },
2022-06-21T16:19:51.7480087Z   KMSKeyArn: undefined,
2022-06-21T16:19:51.7480363Z   DeadLetterConfig: { TargetArn: '' },
2022-06-21T16:19:51.7480763Z   TracingConfig: { Mode: null },
2022-06-21T16:19:51.7480959Z   Layers: [],
2022-06-21T16:19:51.7481128Z   Tags: {},
2022-06-21T16:19:51.7481343Z   PackageType: 'Zip'
2022-06-21T16:19:51.7481573Z }
2022-06-21T16:19:51.7579107Z => Done uploading. Results follow: 
2022-06-21T16:19:51.7579983Z {
2022-06-21T16:19:51.7580435Z   FunctionArn: 'Lambda.updateFunctionConfiguration.mock.FunctionArn',
2022-06-21T16:19:51.7580955Z   FunctionName: 'Lambda.updateFunctionConfiguration.mock.FunctionName'
2022-06-21T16:19:51.7581240Z }
2022-06-21T16:19:51.7582432Z       âœ” simple test with mock
2022-06-21T16:19:51.7583081Z     Lambda.prototype.deploy()
2022-06-21T16:19:51.7586262Z [Warning] `.env` file does not exist.
2022-06-21T16:19:51.7586728Z Execute `node-lambda setup` as necessary and set it up.
2022-06-21T16:19:51.8467464Z => Moving files to temporary directory
2022-06-21T16:19:51.8680630Z => Running package install
2022-06-21T16:19:54.0691851Z (Package manager used was 'npm'.)
2022-06-21T16:19:54.0692721Z => Zipping deployment package
2022-06-21T16:19:54.0694417Z => Zipping repo. This might take up to 30 seconds
2022-06-21T16:20:01.4475684Z => Reading zip file to memory
2022-06-21T16:20:01.4476673Z => Reading event source file to memory
2022-06-21T16:20:01.4478168Z => Reading event source file to memory
2022-06-21T16:20:01.4478723Z => Reading event source file to memory
2022-06-21T16:20:01.4479586Z => Uploading zip file to AWS Lambda us-east-1 with parameters:
2022-06-21T16:20:01.4487405Z {
2022-06-21T16:20:01.4487978Z   FunctionName: '___node-lambda-development',
2022-06-21T16:20:01.4488367Z   Code: {
2022-06-21T16:20:01.4489102Z     ZipFile: <Buffer 50 4b 03 04 14 00 08 00 08 00 79 82 d5 54 00 00 00 00 00 00 00 00 00 00 00 00 0d 00 00 00 2e 6a 73 62 65 61 75 74 69 66 79 72 63 75 90 c1 6e c2 30 10 ... 12831485 more bytes>
2022-06-21T16:20:01.4489521Z   },
2022-06-21T16:20:01.4489915Z   Handler: 'index.handler',
2022-06-21T16:20:01.4490629Z   Role: 'some:arn:aws:iam::role',
2022-06-21T16:20:01.4491046Z   Runtime: 'nodejs16.x',
2022-06-21T16:20:01.4491455Z   Description: '',
2022-06-21T16:20:01.4491793Z   MemorySize: 128,
2022-06-21T16:20:01.4492116Z   Timeout: 3,
2022-06-21T16:20:01.4492546Z   Architectures: [ 'x86_64' ],
2022-06-21T16:20:01.4492901Z   Publish: false,
2022-06-21T16:20:01.4493324Z   VpcConfig: { SubnetIds: [], SecurityGroupIds: [] },
2022-06-21T16:20:01.4493767Z   Environment: { Variables: null },
2022-06-21T16:20:01.4494114Z   KMSKeyArn: undefined,
2022-06-21T16:20:01.4494589Z   DeadLetterConfig: { TargetArn: '' },
2022-06-21T16:20:01.4494991Z   TracingConfig: { Mode: null },
2022-06-21T16:20:01.4495337Z   Layers: [],
2022-06-21T16:20:01.4495647Z   Tags: {},
2022-06-21T16:20:01.4496025Z   PackageType: 'Zip'
2022-06-21T16:20:01.4496358Z }
2022-06-21T16:20:01.4606234Z => Uploading zip file to AWS Lambda us-west-2 with parameters:
2022-06-21T16:20:01.4608855Z {
2022-06-21T16:20:01.4609600Z   FunctionName: '___node-lambda-development',
2022-06-21T16:20:01.4610598Z   Code: {
2022-06-21T16:20:01.4611306Z     ZipFile: <Buffer 50 4b 03 04 14 00 08 00 08 00 79 82 d5 54 00 00 00 00 00 00 00 00 00 00 00 00 0d 00 00 00 2e 6a 73 62 65 61 75 74 69 66 79 72 63 75 90 c1 6e c2 30 10 ... 12831485 more bytes>
2022-06-21T16:20:01.4612018Z   },
2022-06-21T16:20:01.4612520Z   Handler: 'index.handler',
2022-06-21T16:20:01.4613435Z   Role: 'some:arn:aws:iam::role',
2022-06-21T16:20:01.4613964Z   Runtime: 'nodejs16.x',
2022-06-21T16:20:01.4614665Z   Description: '',
2022-06-21T16:20:01.4615099Z   MemorySize: 128,
2022-06-21T16:20:01.4615725Z   Timeout: 3,
2022-06-21T16:20:01.4616254Z   Architectures: [ 'x86_64' ],
2022-06-21T16:20:01.4616904Z   Publish: false,
2022-06-21T16:20:01.4617437Z   VpcConfig: { SubnetIds: [], SecurityGroupIds: [] },
2022-06-21T16:20:01.4618192Z   Environment: { Variables: null },
2022-06-21T16:20:01.4618634Z   KMSKeyArn: undefined,
2022-06-21T16:20:01.4619416Z   DeadLetterConfig: { TargetArn: '' },
2022-06-21T16:20:01.4619932Z   TracingConfig: { Mode: null },
2022-06-21T16:20:01.4620581Z   Layers: [],
2022-06-21T16:20:01.4621310Z   Tags: {},
2022-06-21T16:20:01.4622015Z   PackageType: 'Zip'
2022-06-21T16:20:01.4622444Z }
2022-06-21T16:20:01.4724545Z => Uploading zip file to AWS Lambda eu-west-1 with parameters:
2022-06-21T16:20:01.4726130Z {
2022-06-21T16:20:01.4726782Z   FunctionName: '___node-lambda-development',
2022-06-21T16:20:01.4727535Z   Code: {
2022-06-21T16:20:01.4728217Z     ZipFile: <Buffer 50 4b 03 04 14 00 08 00 08 00 79 82 d5 54 00 00 00 00 00 00 00 00 00 00 00 00 0d 00 00 00 2e 6a 73 62 65 61 75 74 69 66 79 72 63 75 90 c1 6e c2 30 10 ... 12831485 more bytes>
2022-06-21T16:20:01.4728928Z   },
2022-06-21T16:20:01.4729420Z   Handler: 'index.handler',
2022-06-21T16:20:01.4730511Z   Role: 'some:arn:aws:iam::role',
2022-06-21T16:20:01.4731062Z   Runtime: 'nodejs16.x',
2022-06-21T16:20:01.4731766Z   Description: '',
2022-06-21T16:20:01.4732199Z   MemorySize: 128,
2022-06-21T16:20:01.4732844Z   Timeout: 3,
2022-06-21T16:20:01.4733351Z   Architectures: [ 'x86_64' ],
2022-06-21T16:20:01.4734013Z   Publish: false,
2022-06-21T16:20:01.4734551Z   VpcConfig: { SubnetIds: [], SecurityGroupIds: [] },
2022-06-21T16:20:01.4735295Z   Environment: { Variables: null },
2022-06-21T16:20:01.4735739Z   KMSKeyArn: undefined,
2022-06-21T16:20:01.4736522Z   DeadLetterConfig: { TargetArn: '' },
2022-06-21T16:20:01.4737029Z   TracingConfig: { Mode: null },
2022-06-21T16:20:01.4737679Z   Layers: [],
2022-06-21T16:20:01.4738069Z   Tags: {},
2022-06-21T16:20:01.4738763Z   PackageType: 'Zip'
2022-06-21T16:20:01.4739188Z }
2022-06-21T16:20:01.4865234Z => Done uploading. Results follow: 
2022-06-21T16:20:01.4865903Z {
2022-06-21T16:20:01.4867162Z   FunctionArn: 'Lambda.updateFunctionConfiguration.mock.FunctionArn',
2022-06-21T16:20:01.4868117Z   FunctionName: 'Lambda.updateFunctionConfiguration.mock.FunctionName'
2022-06-21T16:20:01.4868952Z }
2022-06-21T16:20:01.4869631Z => Done uploading. Results follow: 
2022-06-21T16:20:01.4870244Z {
2022-06-21T16:20:01.4870927Z   FunctionArn: 'Lambda.updateFunctionConfiguration.mock.FunctionArn',
2022-06-21T16:20:01.4871991Z   FunctionName: 'Lambda.updateFunctionConfiguration.mock.FunctionName'
2022-06-21T16:20:01.4872625Z }
2022-06-21T16:20:01.4873483Z => Done uploading. Results follow: 
2022-06-21T16:20:01.4874525Z {
2022-06-21T16:20:01.4875462Z   FunctionArn: 'Lambda.updateFunctionConfiguration.mock.FunctionArn',
2022-06-21T16:20:01.4876174Z   FunctionName: 'Lambda.updateFunctionConfiguration.mock.FunctionName'
2022-06-21T16:20:01.4876566Z }
2022-06-21T16:20:01.4876870Z => All tasks done. Results follow:
2022-06-21T16:20:01.4877192Z { retentionInDays: 30 }
2022-06-21T16:20:01.4877478Z { retentionInDays: 30 }
2022-06-21T16:20:01.4877775Z { retentionInDays: 30 }
2022-06-21T16:20:01.4878202Z       âœ” simple test with mock (9729ms)
2022-06-21T16:20:01.4878894Z     Lambda.prototype._updateTags()
2022-06-21T16:20:01.4892310Z       âœ” simple test with mock
2022-06-21T16:20:01.4911033Z 
2022-06-21T16:20:01.4911361Z   bin/node-lambda
2022-06-21T16:20:01.4911702Z     node-lambda run
2022-06-21T16:20:02.0131782Z       node-lambda run (Handler only sync processing)
2022-06-21T16:20:02.5567298Z         âœ” `node-lambda run` exitCode is `0` (callback(null)) (545ms)
2022-06-21T16:20:03.1007687Z         âœ” `node-lambda run` exitCode is `0` (callback(null, "text")) (544ms)
2022-06-21T16:20:03.6463217Z         âœ” `node-lambda run` exitCode is `255` (callback(new Error("e"))) (545ms)
2022-06-21T16:20:03.6466705Z       node-lambda run (Handler includes async processing)
2022-06-21T16:20:03.6467670Z         callbackWaitsForEmptyEventLoop = true
2022-06-21T16:20:07.6528195Z           âœ” `node-lambda run` exitCode is `0` (callback(null)) (4006ms)
2022-06-21T16:20:11.6765791Z           âœ” `node-lambda run` exitCode is `0` (callback(null, "text")) (4024ms)
2022-06-21T16:20:15.7046831Z           âœ” `node-lambda run` exitCode is `255` (callback(new Error("e"))) (4028ms)
2022-06-21T16:20:15.7048190Z         callbackWaitsForEmptyEventLoop = false
2022-06-21T16:20:16.2002916Z           âœ” `node-lambda run` exitCode is `0` (callback(null)) (495ms)
2022-06-21T16:20:16.6992874Z           âœ” `node-lambda run` exitCode is `0` (callback(null, "text")) (498ms)
2022-06-21T16:20:17.2027195Z           âœ” `node-lambda run` exitCode is `255` (callback(new Error("e"))) (504ms)
2022-06-21T16:20:17.2035180Z       node-lambda run (Runtime is not supported)
2022-06-21T16:20:17.7067710Z         âœ” `node-lambda run` exitCode is `254` (callback(null)) (504ms)
2022-06-21T16:20:17.7069414Z       node-lambda run (Multiple events))
2022-06-21T16:20:19.7113403Z         âœ” `node-lambda run` exitCode is `0` (2005ms)
2022-06-21T16:20:19.7115424Z       node-lambda run (disable Multiple events))
2022-06-21T16:20:20.2160891Z         âœ” `node-lambda run` exitCode is `0` (504ms)
2022-06-21T16:20:20.2161807Z       node-lambda run (API Gateway events))
2022-06-21T16:20:20.7160394Z         âœ” `node-lambda run` exitCode is `0` (499ms)
2022-06-21T16:20:20.7164640Z     node-lambda duplicate check of short option
2022-06-21T16:20:21.2140115Z       âœ” cmd:deploy (497ms)
2022-06-21T16:20:21.7062536Z       âœ” cmd:run (491ms)
2022-06-21T16:20:22.2069949Z       âœ” cmd:setup (500ms)
2022-06-21T16:20:22.2070783Z     node-lambda --version
2022-06-21T16:20:22.6931646Z       âœ” The current version is displayed (485ms)
2022-06-21T16:20:22.6932242Z 
2022-06-21T16:20:22.6932626Z   lib/s3_deploy
2022-06-21T16:20:22.6970420Z     _md5
2022-06-21T16:20:22.6971023Z       âœ” md5("hoge") === "ea703e7aa1efda0064eaa507d9e8ab7e"
2022-06-21T16:20:22.6972744Z     _convertRegionStringToEnvVarName
2022-06-21T16:20:22.6973472Z       âœ” Upper case. Replace "-" with "_".
2022-06-21T16:20:22.7021718Z     _getBucketNameFromEnvVar
2022-06-21T16:20:22.7022166Z       âœ” is undefined
2022-06-21T16:20:22.7022591Z       âœ” Get values from environment variables
2022-06-21T16:20:22.7022921Z     _getS3KeyPrefixFromEnvVar
2022-06-21T16:20:22.7023234Z       âœ” is undefined
2022-06-21T16:20:22.7023634Z       âœ” Get values from environment variables
2022-06-21T16:20:22.7023916Z     _bucketName
2022-06-21T16:20:22.7024270Z       âœ” FunctionName + region + md5()
2022-06-21T16:20:22.7024673Z       âœ” Use environment variables
2022-06-21T16:20:22.7024932Z     _s3Key
2022-06-21T16:20:22.7025344Z       âœ” "deploy-package" + FunctionName + ".zip"
2022-06-21T16:20:22.7025754Z       âœ” Use environment variables
2022-06-21T16:20:22.7026022Z     _getS3Location
2022-06-21T16:20:22.7026289Z       âœ” is null
2022-06-21T16:20:22.7026605Z       âœ” === "ap-southeast-1"
2022-06-21T16:20:22.7026870Z     _createBucket
2022-06-21T16:20:22.7027143Z       âœ” using mock
2022-06-21T16:20:22.7027377Z     _putObject
2022-06-21T16:20:22.7027659Z       âœ” using mock
2022-06-21T16:20:22.7027883Z     putPackage
2022-06-21T16:20:22.7028179Z => S3 Bucket created:
2022-06-21T16:20:22.7028826Z ===> node-lambda-test-bucket-20180801-ap-southeast-1-6c696118a497125
2022-06-21T16:20:22.7029271Z => Deploy the zip file to S3:
2022-06-21T16:20:22.7030167Z ===> node-lambda-test-bucket-20180801-ap-southeast-1-6c696118a497125/deploy-package-node-lambda-test-bucket-20180801.zip
2022-06-21T16:20:22.7030762Z       âœ” using mock
2022-06-21T16:20:22.7030916Z 
2022-06-21T16:20:22.7031017Z   lib/s3_events
2022-06-21T16:20:22.7041671Z     _functionName
2022-06-21T16:20:22.7042426Z       âœ” Extract name from FunctionArn
2022-06-21T16:20:22.7046017Z     _statementId
2022-06-21T16:20:22.7055451Z       âœ” StatementId that matches /[a-zA-Z0-9-_]+/.
2022-06-21T16:20:22.7059320Z     _addPermissionParams
2022-06-21T16:20:22.7065356Z       âœ” Return parameters for lambda.addPermission()
2022-06-21T16:20:22.7069465Z     _lambdaFunctionConfiguration
2022-06-21T16:20:22.7075320Z       âœ” Return parameters for s3._lambdaFunctionConfiguration(). No Filter
2022-06-21T16:20:22.7082164Z       âœ” Return parameters for s3.putBucketNotificationConfiguration(). Use Filter
2022-06-21T16:20:22.7086520Z     _paramsListToBucketNotificationConfigurations
2022-06-21T16:20:22.7090219Z       The number of elements of paramsList is 1
2022-06-21T16:20:22.7096725Z         âœ” Return parameter list of putBucketNotificationConfiguration
2022-06-21T16:20:22.7101147Z       The number of elements of paramsList is 2. Same bucket
2022-06-21T16:20:22.7108153Z         âœ” Return parameter list of putBucketNotificationConfiguration
2022-06-21T16:20:22.7112711Z       The number of elements of paramsList is 2. Different bucket
2022-06-21T16:20:22.7119420Z         âœ” Return parameter list of putBucketNotificationConfiguration
2022-06-21T16:20:22.7123663Z     _addPermission
2022-06-21T16:20:22.7131274Z       âœ” using mock
2022-06-21T16:20:22.7135493Z     _putBucketNotificationConfiguration
2022-06-21T16:20:22.7143157Z       âœ” using mock
2022-06-21T16:20:22.7145762Z     add
2022-06-21T16:20:22.7154138Z       âœ” using mock
2022-06-21T16:20:22.7157885Z 
2022-06-21T16:20:22.7159848Z   lib/schedule_events
2022-06-21T16:20:22.7178227Z     _ruleDescription (default)
2022-06-21T16:20:22.7182149Z       âœ” correct value
2022-06-21T16:20:22.7184627Z     _ruleDescription (custom)
2022-06-21T16:20:22.7189085Z       âœ” correct value
2022-06-21T16:20:22.7192143Z     _functionName
2022-06-21T16:20:22.7195547Z       âœ” correct value
2022-06-21T16:20:22.7197894Z     _putRulePrams
2022-06-21T16:20:22.7201887Z       âœ” correct value
2022-06-21T16:20:22.7204299Z     _addPermissionParams
2022-06-21T16:20:22.7208706Z       âœ” correct value
2022-06-21T16:20:22.7211370Z     _putTargetsParams
2022-06-21T16:20:22.7215544Z       âœ” correct value (No "Input" setting)
2022-06-21T16:20:22.7220314Z       âœ” correct value ("Input" setting)
2022-06-21T16:20:22.7222764Z     _putRule
2022-06-21T16:20:22.7228701Z       âœ” using mock
2022-06-21T16:20:22.7231236Z     _addPermission
2022-06-21T16:20:22.7236994Z       âœ” using mock
2022-06-21T16:20:22.7239372Z     _putTargets
2022-06-21T16:20:22.7244937Z       âœ” using mock
2022-06-21T16:20:22.7247274Z     add
2022-06-21T16:20:22.7253920Z       âœ” using mock
2022-06-21T16:20:22.7257353Z 
2022-06-21T16:20:22.7277476Z 
2022-06-21T16:20:22.7280140Z   161 passing (2m)
2022-06-21T16:20:22.7280542Z 
2022-06-21T16:20:22.7954096Z Post job cleanup.
2022-06-21T16:20:22.9301112Z [command]/opt/hostedtoolcache/node/18.4.0/x64/bin/npm config get cache
2022-06-21T16:20:23.2671339Z /home/runner/.npm
2022-06-21T16:20:23.4130800Z [command]/usr/bin/tar --posix --use-compress-program zstd -T0 -cf cache.tzst -P -C /home/runner/work/node-lambda/node-lambda --files-from manifest.txt
2022-06-21T16:20:25.4706186Z Cache Size: ~21 MB (21537476 B)
2022-06-21T16:20:25.5923761Z Cache saved successfully
2022-06-21T16:20:25.5984399Z Cache saved with the key: node-cache-Linux-npm-765f53e0338277e0086b62881520b2b50c67502d0e92bf59166ecab08f1f5d19
2022-06-21T16:20:25.6124654Z Post job cleanup.
2022-06-21T16:20:25.7487532Z [command]/usr/bin/git version
2022-06-21T16:20:25.7543270Z git version 2.36.1
2022-06-21T16:20:25.7591883Z Temporarily overriding HOME='/home/runner/work/_temp/45e23a95-9fd0-4b0a-9c82-76c077bc6697' before making global git config changes
2022-06-21T16:20:25.7592801Z Adding repository directory to the temporary git global config as a safe directory
2022-06-21T16:20:25.7598679Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/node-lambda/node-lambda
2022-06-21T16:20:25.7647949Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2022-06-21T16:20:25.7693094Z [command]/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :
2022-06-21T16:20:25.7965608Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2022-06-21T16:20:25.7996849Z http.https://github.com/.extraheader
2022-06-21T16:20:25.8050757Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2022-06-21T16:20:25.8093232Z [command]/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :
2022-06-21T16:20:25.8671726Z Cleaning up orphan processes