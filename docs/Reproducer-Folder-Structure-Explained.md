# Reproducer Folder Structure Explained

| Location                       | Contents                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ------------------------------ |-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `input/`                       | This directory is optional. That is, the directory is not created by `reproducer` automatically. The (concatenated) output JSON file from `log-downloader` is written to `reproducer`'s `input/` directory.                                                                                                                                                                                                                                                                                                                                   |
| `intermediates/`               | The parent directory of all files that are generated or downloaded during `reproducer` runs.                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `intermediates/orig_logs/`     | Contains the original Travis build logs. `log-downloader` writes the downloaded logs to this directory.                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `intermediates/project_repos/` | Contains the clones of the repositories whose builds will be reproduced. Every repository is cloned only once. When a job is reproduced, the repository is reset to a particular commit. Before resetting to a commit, `reproducer` copies the repository from here to `intermediates/workspace/`.                                                                                                                                                                                                                                            |
| `intermediates/workspace/`     | Contains temporary files of reproduced jobs. Each subdirectory in this directory is named with the trigger commit SHA of the job. This namespacing avoids contamination between repositories that are reset to different commits. Each reset repository contains a `reproduce_tmp` directory where the generated Dockerfile and build script are stored during the reproducing process. When a job is done reproducing, and if no error occurred, files in `reprodce_tmp` are copied to the task folder, where final output files are stored. |
| `output/`                      | The parent directory of all reproducer output files.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `output/task/`                 | Contains reproduced logs. Each invocation of `reproducer` is identified by a `task_name`. Output files for each task are written to `output/<task_name>`. For example, if the task name is "100_java_repos", then the output files are written to `output/100_java_repos`. If the `-k` or `--keep` option is specified (`reproducer/entry.py`), then the Dockerfile, build script, reproduced log, and repository tar files are all stored here. Otherwise, only the reproduced log is stored here.                                           |
| `output/result_json/`          | Contains the output JSON files from `reproduced_results_analyzer.py`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `output/csv/`                  | Contains the output CSV file, iff the `--csv` option for `reproducer/packager.py` is specified.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
